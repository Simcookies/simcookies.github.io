<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Web 全栈开发指南</title><meta name="description" content="周末一天的时间看完了Web 全栈开发指南这本书1. 正如书中所说的一样, 其着重于Web 开发的原理,一般方法和工具, 而不是某一种特殊的语言. 书的前面一半的内容主要是介绍 Web 相关的基本知识包括了网页三要素 HTML, CSS, JavaScript 三个部分的基本内容, 因此我就大概地翻看了一遍. 主要..."><link rel="stylesheet" href="/public/css/main.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="canonical" href="http://simcookies.github.io/2017/12/02/fullstack-reference"><link rel="alternate" type="application/rss+xml" title="Simcookies" href="http://simcookies.github.io/feed.xml"><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/public/script/main.js"></script><link rel="shortcut icon" type="image/x-icon" href="/public/favicon.ico"></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="/">Simcookies</a> <span class="menu-icon" id="menu-icon"><span class="fa-stack fa-lg"><i class="fa fa-square-o fa-stack-2x"></i> <i class="fa fa-bars fa-stack-1x"></i></span></span><nav class="site-nav"><div class="trigger"><a class="page-link" href="/about/">About</a> <a class="page-link" href="/archive/">Archive</a> <a class="page-link" href="/wiki/">Wiki</a> <a class="page-link" href="/feed.xml">Feeds</a> <a class="page-link" href="https://github.com/Simcookies/gitio" target="_blank"><i class="fa fa-github-alt fa-lg"></i> Repositories</a></div></nav></div></header><div class="scroll-content"><div class="page-content"><div class="wrapper"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><h1 class="post-title" itemprop="name headline">Web 全栈开发指南</h1><p class="post-meta"><time datetime="2017-12-02T15:49:44+09:00" itemprop="datePublished">Dec 2, 2017</time>  <i class="fa fa-archive" aria-hidden="true"></i>  <span><a class="category-div" href="/category/basic">basic</a></span>  <i class="fa fa-tag"></i>  <a class="tag-div" href="/tag/ruby">ruby</a>  <a class="tag-div" href="/tag/python">python</a>  <a class="tag-div" href="/tag/server">server</a> </p></header><div class="post-content" itemprop="articleBody"><p>周末一天的时间看完了<em><a href="https://www.gitbook.com/book/coin8086/getfullstack/details">Web 全栈开发指南</a></em>这本书<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>. 正如书中所说的一样, 其着重于Web 开发的原理,一般方法和工具, 而不是某一种特殊的语言. 书的前面一半的内容主要是介绍 Web 相关的基本知识包括了网页三要素 HTML, CSS, JavaScript 三个部分的基本内容, 因此我就大概地翻看了一遍. 主要是第三章的_编程语言与技术_开始着重看了一下.再加上其他的一些调查, 写成下面的博客. (这一篇实在不想用英语写了 <img class="emoji" title=":joy:" alt=":joy:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f602.png" height="20" width="20">)</p><hr><h1 id="动态内容服务端编程方式">(动态内容)服务端编程方式</h1><h2 id="通用网关接口cgi">通用网关接口CGI</h2><p>虽然目前已经基本上没有人在用了, 但是Web 服务器还是在支持着它.它的处理步骤:</p><ol><li>通过 Internet 把用户的请求送到服务器.</li><li>服务器把接收到的请求交给 CGI 程序处理.</li><li>CGI 程序把处理的结果传给服务器.</li><li>服务器再把响应送给用户</li></ol><p>而 CGI 在处理的时候是每一个请求对应一个进程的, 因此对于较大请求量的时候 会消耗很多资源, CGI 就不是一个好的选择了.</p><h2 id="php">PHP<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></h2><h2 id="java-servlet">Java (Servlet)</h2><p>Java Servlet 只能为 Java 提供服务器. 它的处理步骤:</p><ol><li>通过 Internet 把用户的请求送到服务器.</li><li>服务器启动并调用 Servlet</li><li>Servlet 根据用户的请求进行处理并传递给服务器</li><li>服务器再把响应送给用户</li></ol><p>和 CGI 不同的地方在于, Servlet 每一个请求对应一个线程. 在性能方面比 CGI 高很多. 具体的这里有一篇<a href="http://www.c4learn.com/java/servlet/servlet-vs-cgi/">参考文章</a>. 而在真正开发的过程中我们接触到的是框架, 比如 <a href="https://spring.io/">Spring</a> 之类的.</p><h2 id="python">Python</h2><p>Python 在服务端主要依赖于 WSGI (Web Server Gateway Interface) 规范. 这个规范定义了服务器和应用程序的交互接口.</p><p>在 WSGI 中有一个中间件(Middleware) 的概念: 服务器在接收到请求之后, 由中间件先进行响应, 然后再传递给下一级的应用或者下一层的中间件. 简单的说, 就是在服务器与应用程序之间加上了一层或者多层中间处理, 在中间件里面, 可以实现日志, 错误处理等等.</p><h2 id="ruby">Ruby</h2><p>Ruby 是我一直使用的开发语言. 虽然一直在使用 Ruby on Rails, 但是居然没有听说过 Rack, 实在是汗颜.<img class="emoji" title=":cold_sweat:" alt=":cold_sweat:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f630.png" height="20" width="20"> 同样类似于 Python 的 WSGI, Rack 也有中间件的概念<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>.</p><h2 id="nodejs">Node.js<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup></h2><hr><h1 id="服务器架构">服务器架构</h1><p>以前对这一块也是模模糊糊, 看完之后有了一个大概的轮廓. 包括我们常听说的 Apache 或者 Nginx, IIS 之类的各种概念进行一下整理.</p><h2 id="最基本的情况">最基本的情况</h2><p>如果站点的访问量不是很多, 可以直接把服务器放在网络上, 给出下图的例子:</p><p><img src="/public/image/basic_web_server.png" alt="basic instance"></p><p>这里的 Web 服务器可以是 Apache HTTP Server, Nginx, Microsoft 的 IIS 等等. 还有上面说到的专供的 Servlet, 只为 Java 服务之类的服务器. 还有 Node.js 自带的 Web 服务器.</p><h2 id="load-balancing">Load balancing</h2><p>一般来说网站一个服务器是不够的, 需要一组服务器. 负载均衡器接受 HTTP 请求, 并分发给内部的 Web 服务器. 知名的负载均衡器有 <a href="https://en.wikipedia.org/wiki/HAProxy">HAProxy</a>, 而上面说的 Apache, Nginx 也可以充当负载均衡器.</p><h2 id="具体分析">具体分析</h2><p>之前的开发中总是会听到 Nginx + Passenger + Ruby on Rails 或者 Apache + Unicorn + Ruby on Rails 的服务器结构, 详细解释每一个环节的作用就是:</p><p>Nginx 或者 Apache 是 负载均衡器同时也是 Web 服务器, 它们用来响应客户端的请求进而转发给应用程序. Unicorn 是 Ruby 的一个 HTTP 服务器. 他会在自己的进程空间内加载 Ruby 的应用, 并且将外部的 HTTP 内容进行包装后和 Ruby 应用进行通信.Unicorn 易于调试, 用于管理 Rack 类的应用程序. 与之类似的还有 Thin, Puma 等等.而 Passenger 有点特殊, 它直接融入到了Nginx 或者 Apache, 成为他们能够直接使用的模块:</p><blockquote><p>From Wikipedia Phusion Passenger (informally also known as mod_rails and mod_rack among the Ruby community) is a free web server and application server with support for Ruby, Python and Node.js</p></blockquote><p>Passenger 也可以统一管理 Rails 的进程数量, 生命周期, 请求队列等等. 最后这张图可能有助于理解上述的关系:</p><p><img src="/public/image/server_analysis.png" alt="server analysis"></p><hr><h1 id="参考">参考</h1><blockquote><ul><li><a href="http://fujiike.hateblo.jp/entry/2015/08/20/170751">ApacheとNginxとPassengerとUnicornの違い【すごい初心者向け】</a></li><li><a href="https://stackoverflow.com/questions/4113299/ruby-on-rails-server-options">Ruby on Rails Server options</a></li><li><a href="https://www.gitbook.com/book/coin8086/getfullstack/details">Web全栈技术指南</a></li></ul></blockquote><div class="footnotes"><ol><li id="fn:1"><p>严格地说只是作者自己的总结写成的 Gitbook. <a href="#fnref:1" class="reversefootnote">↩</a></p></li><li id="fn:2"><p>对于 PHP 不是很了解, 毕竟我是入门级玩家. <a href="#fnref:2" class="reversefootnote">↩</a></p></li><li id="fn:3"><p>对于 WSGI 和 Rack 的介绍, 我想再具体写一个博客. <a href="#fnref:3" class="reversefootnote">↩</a></p></li><li id="fn:4"><p>在学习过程中, 可能学完之后再写博客~ <a href="#fnref:4" class="reversefootnote">↩</a></p></li></ol></div></div><hr><div class="post-nav"><a href="/2017/11/30/rails-error-of-key-must-be-32-bytes" class="left link">&lt;&lt; Previous </a><a class="right unlink">Next &gt;&gt;</a></div><hr><div id="disqus_thread"></div><script>/**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() {  // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//simcookiesgithubio.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></article><div class="mark-link"><a id="bookmark"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-book fa-stack-1x fa-inverse"></i></span></a></div><div id="toc-area" class="sidebar" style="display:none"><div class="col toc-area">  <i class="fa fa-bookmark" aria-hidden="true"></i>  Table of Contents<ul class="section-nav"><li class="toc-entry toc-h1"><a href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AE%B9%E6%9C%8D%E5%8A%A1%E7%AB%AF%E7%BC%96%E7%A8%8B%E6%96%B9%E5%BC%8F">(动态内容)服务端编程方式</a><ul><li class="toc-entry toc-h2"><a href="#%E9%80%9A%E7%94%A8%E7%BD%91%E5%85%B3%E6%8E%A5%E5%8F%A3cgi">通用网关接口CGI</a></li><li class="toc-entry toc-h2"><a href="#php2">PHP2</a></li><li class="toc-entry toc-h2"><a href="#java-servlet">Java (Servlet)</a></li><li class="toc-entry toc-h2"><a href="#python">Python</a></li><li class="toc-entry toc-h2"><a href="#ruby">Ruby</a></li><li class="toc-entry toc-h2"><a href="#nodejs4">Node.js4</a></li></ul></li><li class="toc-entry toc-h1"><a href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84">服务器架构</a><ul><li class="toc-entry toc-h2"><a href="#%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%83%85%E5%86%B5">最基本的情况</a></li><li class="toc-entry toc-h2"><a href="#load-balancing">Load balancing</a></li><li class="toc-entry toc-h2"><a href="#%E5%85%B7%E4%BD%93%E5%88%86%E6%9E%90">具体分析</a></li></ul></li><li class="toc-entry toc-h1"><a href="#%E5%8F%82%E8%80%83">参考</a></li></ul></div></div></div></div><footer class="site-footer">© 2016~2017 by Simcookies. All rights reserved.<div class="quick-link" id="quick-link"><a id="page-top"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-arrow-up fa-stack-1x fa-inverse"></i> </span></a><a href="/"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-home fa-stack-1x fa-inverse"></i></span></a></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85209586-1', 'auto');
  ga('send', 'pageview');</script></body></html>