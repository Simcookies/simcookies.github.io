<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Network Studying Note 2</title><meta name="description" content="In the post of Network Studying Note 1, I took notes about the history of Internet and Internet Protocol Suite, especially, the TCP/IP Protocol. TCP/IP conta..."><link rel="shortcut icon" type="image/x-icon" href="/public/favicon.ico"><link rel="stylesheet" href="/public/css/main.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.css" integrity="sha512-EaaldggZt4DPKMYBa143vxXQqLq5LE29DG/0OoVenoyxDrAScYrcYcHIuxYO9YNTIQMgD8c8gIUU8FQw7WpXSQ==" crossorigin="anonymous"><link rel="canonical" href="https://simcookies.github.io/2017/10/16/network-studying-note-2"><link rel="alternate" type="application/rss+xml" title="Simcookies" href="https://simcookies.github.io/feed.xml"><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/simple-jekyll-search/1.7.12/simple-jekyll-search.min.js" integrity="sha512-APy7Ff/y4pdIHleqiTMcRZ8Wu6tjfqhJpgAcaCvTuFQPj/G+/A5u0uZi/DkfkuLQ6FeFmDJgh/zl0y3If/VUyA==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.2/mermaid.min.js" integrity="sha512-x8NWYlEsC86ngfO24tbxW6pMuyn9gYnwEW0FcSobohDc3iLCXhmRkqYXgTfE7Jwy2YCTnHRfyum8LUIiyvmgWQ==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha512-Fv0JVzxvrWFLhiUP8wZYR6VwBZQt0XqB9MhHZE+12lObqIDzg3LOJcCCiRy6g4MCX/MlG+R9IRCWZAHjo9iBgw==" crossorigin="anonymous"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
      showProcessingMessages: false,
      messageStyle: "none",
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
      }
    });</script><script src="/public/script/main.js"></script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="/">Simcookies</a> <span class="menu-icon" id="menu-icon"><span class="fa-stack fa-lg"><i class="fa fa-square-o fa-stack-2x"></i> <i class="fa fa-bars fa-stack-1x"></i></span></span><nav class="site-nav"><div class="trigger"><a class="page-link" href="/about/">About</a> <a class="page-link" href="/archive/">Archive</a> <a class="page-link" href="/wiki/">Wiki</a> <a class="page-link" href="/feed.xml">Feeds</a> <a class="page-link" href="https://github.com/simcookies/gitio" target="_blank" rel="noopener noreferrer"><i class="fa fa-github-alt fa-lg"></i> Repositories</a></div></nav></div></header><div class="scroll-content"><div class="page-content"><div class="wrapper"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><h1 class="post-title" itemprop="name headline">Network Studying Note 2</h1><p class="post-meta"><time datetime="2017-10-16T00:00:00+09:00" itemprop="datePublished">Oct 16, 2017</time>  <i class="fa fa-archive" aria-hidden="true"></i>  <span><a class="category-div" href="/category/basics">basics</a></span>  <i class="fa fa-tag"></i>  <a class="tag-div" href="/tag/internet">internet</a> </p></header><div class="post-content" itemprop="articleBody"><p>In the post of <a href="/2017/03/19/network_studying_note_1">Network Studying Note 1</a>, I took notes about the history of Internet and Internet Protocol Suite, especially, the TCP/IP Protocol. TCP/IP contains four layers of Application, Transport, Network and Network Interface. During transmission from layer to layer, top-down is called <strong>Encapsulation</strong> and button-up is called <strong>Decapsulation</strong>. In this post, I will write about the Encapsulations of last three layers and also includes about Three-way-Handshake.</p><p>In order to transport network data, the application will send data to transport layer with some header data. The Application is just responsible for processing data logically and regardless of the transmission of it.</p><hr><h1 id="transport-layer">Transport Layer</h1><p>TCP Segment &amp; UDP Segment</p><p>The best-known transport protocol of TCP/IP is the <a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" target="_blank" rel="noopener noreferrer">Transmission Control Protocol (TCP)</a>. It is used for connection-oriented transmissions, whereas the connectionless <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" target="_blank" rel="noopener noreferrer">User Datagram Protocol (UDP)</a> is used for simpler messaging transmissions. TCP is the more complex protocol, due to its stateful design incorporating reliable transmission and data stream services.</p><h2 id="tcp">TCP</h2><p>TCP provides reliable, ordered, and error-checked delivery of a stream of octets between applications running on hosts communicating over an IP network. Major Internet applications such as the WWW, email, remote administration, and file transfer rely on TCP. This picture shows the segment structure of TCP.</p><p><img src="https://raw.githubusercontent.com/simcookies/image-host/master/imgs/20201102143331.png" alt="tcp_segment"></p><p>The most used bits are:</p><ul><li><strong>Source port</strong> (16 bits): Identifies the sending port. Every server or client has 0 ~ 65535 port, and different ports are corresponding to different services. The most used ports:</li></ul><table><thead><tr><th>Port Number</th><th>Server</th></tr></thead><tbody><tr><td>20 or 21</td><td>FTP</td></tr><tr><td>22</td><td>ssh</td></tr><tr><td>23</td><td>Telent</td></tr><tr><td>25</td><td>SMTP</td></tr><tr><td>80</td><td>HTTP</td></tr><tr><td>110</td><td>POP3</td></tr><tr><td>443</td><td>HTTPS</td></tr></tbody></table><ul><li><strong>Destination port</strong> (16 bits): Identifies the receiving port</li></ul><h2 id="udp">UDP</h2><p>UDP provides checksums for data integrity and port numbers for addressing different functions at the source and destination of the datagram. UDP is different with TCP without having no handshaking dialogues. This picture shows the segment structure of UDP.</p><p><img src="https://raw.githubusercontent.com/simcookies/image-host/master/imgs/20201102143500.png" alt="udp_segment"></p><h2 id="handshaking">Handshaking</h2><p>TCP pays more attention to security, instead, UDP pays more attention to effectiveness. Three times handshaking was introduced into TCP for security with a set of SYN, SYN-ACK, ACK signals. As my understanding, it sounds like that a communication in a classroom. A teacher wants to communicate with a student.</p><ul><li>Firstly, he calls his name and asks him is listening or not, the first handshaking.</li><li>Secondly, the student answers Yes and asks teacher is still there or not, the second handshaking.</li><li>Finally, the teacher makes sure and says “I will communicate with you from now” to begin this communication, the third handshaking.</li></ul><p>After three times handshaking, the safe communication can be established. If the student is not there or after the student said “I’m here” but the teacher was gone, the communication cannot be established. By the way, if the teacher was gone after the first handshaking, the student will always wait for him and try to connect with the teacher after a period of time until the teacher answers or “his death”. This is one way of <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack" target="_blank" rel="noopener noreferrer">DoS Attack</a>.</p><p>On the other hand, UDP has no handshaking. The teacher just says what he wants to say regardless of the student’s attendance. So UDP has better effectiveness.</p><hr><h1 id="encapsulation">Encapsulation</h1><p>How to transmit data with four layers? For UDP, the data of Application will be sent to Transport layer, and it adds UDP header in the front of data and sends to next Internet layer. Internet layer will add IP header in the front of that data and send to Data Link layer. Data Link layer add a Frame header in the front of data and add Frame footer in the behind of data. Finally, it sends the frame by physical signals. Here is the picture.</p><p><img src="https://raw.githubusercontent.com/simcookies/image-host/master/imgs/20201102143533.png" alt="encapsulation"></p><p>Decapsulation has opposite steps of encapsulation.</p></div><hr><div class="post-nav"><a href="/2017/03/19/network_studying_note_1" class="left link">&lt;&lt; Previous </a><a href="/2017/10/18/using-basictex-on-osx-terminal" class="right link">Next &gt;&gt;</a></div><hr><div id="disqus_thread"></div><script>/**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  /*
  var disqus_config = function () {
  this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  (function() {  // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//simcookiesgithubio.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="noopener noreferrer" target="_blank">comments powered by Disqus.</a></noscript></article><div class="mark-link"><a id="bookmark"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-book fa-stack-1x fa-inverse"></i></span></a></div><div id="toc-area" class="sidebar" style="display:none"><div class="col toc-area">  <i class="fa fa-bookmark" aria-hidden="true"></i>  Table of Contents<ul class="section-nav"><li class="toc-entry toc-h1"><a href="#transport-layer">Transport Layer</a><ul><li class="toc-entry toc-h2"><a href="#tcp">TCP</a></li><li class="toc-entry toc-h2"><a href="#udp">UDP</a></li><li class="toc-entry toc-h2"><a href="#handshaking">Handshaking</a></li></ul></li><li class="toc-entry toc-h1"><a href="#encapsulation">Encapsulation</a></li></ul></div></div></div></div><footer class="site-footer">© 2016~2020 by Simcookies. All rights reserved.<div class="quick-link" id="quick-link"><a id="page-top"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-arrow-up fa-stack-1x fa-inverse"></i> </span></a><a href="/"><span class="fa-stack fa-lg"><i class="fa fa-square fa-stack-2x"></i> <i class="fa fa-home fa-stack-1x fa-inverse"></i></span></a></div></footer></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                           m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85209586-1', 'auto');
  ga('send', 'pageview');</script></body></html>